(function(){"use strict";var er=async function(V={}){var Xe,Ze,Qe;var M,i=V,G=typeof window=="object",z=typeof WorkerGlobalScope<"u",A=typeof process=="object"&&((Xe=process.versions)==null?void 0:Xe.node)&&process.type!="renderer",h=!G&&!A&&!z;if(A){const{createRequire:e}=await Promise.resolve().then(function(){return rr});var y=e(self.location.href)}var U=self.location.href,j="";function ge(e){return i.locateFile?i.locateFile(e,j):j+e}var k,Y;if(A){if(!(typeof process=="object"&&((Ze=process.versions)==null?void 0:Ze.node)&&process.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var ie=process.versions.node,P=ie.split(".").slice(0,3);if(P=P[0]*1e4+P[1]*100+P[2].split("-")[0]*1,P<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+ie+")");var we=y("fs");U.startsWith("file:")&&(j=y("path").dirname(y("url").fileURLToPath(U))+"/"),Y=r=>{r=q(r)?new URL(r):r;var t=we.readFileSync(r);return c(Buffer.isBuffer(t)),t},k=async(r,t=!0)=>{r=q(r)?new URL(r):r;var n=we.readFileSync(r,t?void 0:"utf8");return c(t?Buffer.isBuffer(n):typeof n=="string"),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(h){if(typeof process=="object"&&((Qe=process.versions)==null?void 0:Qe.node)&&process.type!="renderer"||typeof window=="object"||typeof WorkerGlobalScope<"u")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else if(G||z){try{j=new URL(".",U).href}catch{}if(!(typeof window=="object"||typeof WorkerGlobalScope<"u"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");z&&(Y=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),k=async e=>{if(q(e))return new Promise((t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{if(a.status==200||a.status==0&&a.response){t(a.response);return}n(a.status)},a.onerror=n,a.send(null)});var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}else throw new Error("environment detection error");var Ee=console.log.bind(console),p=console.error.bind(console);c(!h,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var J;typeof WebAssembly!="object"&&p("no native wasm support detected");var ae=!1;function c(e,r){e||g("Assertion failed"+(r?": "+r:""))}var q=e=>e.startsWith("file://");function tr(){var e=he();c((e&3)==0),e==0&&(e+=4),f[e>>2]=34821223,f[e+4>>2]=2310721022,f[0]=1668509029}function ve(){if(!ae){var e=he();e==0&&(e+=4);var r=f[e>>2],t=f[e+4>>2];(r!=34821223||t!=2310721022)&&g(`Stack overflow! Stack cookie has been overwritten at ${ee(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ee(t)} ${ee(r)}`),f[0]!=1668509029&&g("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(()=>{var e=new Int16Array(1),r=new Int8Array(e.buffer);if(e[0]=25459,r[0]!==115||r[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})();function oe(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,set(){g(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function b(e){return()=>c(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function nr(e){Object.getOwnPropertyDescriptor(i,e)&&g(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function Ae(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function ke(e,r){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,e)&&Object.defineProperty(globalThis,e,{configurable:!0,get(){r()}})}function Pe(e,r){ke(e,()=>{T(`\`${e}\` is not longer defined by emscripten. ${r}`)})}Pe("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Pe("asm","Please use wasmExports instead");function ir(e){ke(e,()=>{var r=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,t=e;t.startsWith("_")||(t="$"+e),r+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${t}')`,Ae(e)&&(r+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),T(r)}),Ce(e)}function Ce(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var r=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;Ae(e)&&(r+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),g(r)}})}var se,le,K,C,F,B,$,L,f,ce,de,ue,Ie,fe=!1;function Re(){var e=K.buffer;C=new Int8Array(e),i.HEAP16=B=new Int16Array(e),i.HEAPU8=F=new Uint8Array(e),$=new Uint16Array(e),i.HEAP32=L=new Int32Array(e),f=new Uint32Array(e),ce=new Float32Array(e),de=new Float64Array(e),ue=new BigInt64Array(e),Ie=new BigUint64Array(e)}c(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support");function ar(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)yr(i.preRun.shift());oe("preRun"),Me(Le)}function or(){c(!fe),fe=!0,ve(),H.__wasm_call_ctors()}function sr(){if(ve(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)vr(i.postRun.shift());oe("postRun"),Me(Ue)}var D=0,X=null,Z={},x=null;function lr(e){var r;D++,(r=i.monitorRunDependencies)==null||r.call(i,D),c(!Z[e]),Z[e]=1,x===null&&typeof setInterval<"u"&&(x=setInterval(()=>{if(ae){clearInterval(x),x=null;return}var t=!1;for(var n in Z)t||(t=!0,p("still waiting on run dependencies:")),p(`dependency: ${n}`);t&&p("(end of list)")},1e4))}function cr(e){var t;if(D--,(t=i.monitorRunDependencies)==null||t.call(i,D),c(Z[e]),delete Z[e],D==0&&(x!==null&&(clearInterval(x),x=null),X)){var r=X;X=null,r()}}function g(e){var t;(t=i.onAbort)==null||t.call(i,e),e="Aborted("+e+")",p(e),ae=!0;var r=new WebAssembly.RuntimeError(e);throw le==null||le(r),r}var S={error(){g("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){S.error()},createDataFile(){S.error()},createPreloadedFile(){S.error()},createLazyFile(){S.error()},open(){S.error()},mkdev(){S.error()},registerDevice(){S.error()},analyzePath(){S.error()},ErrnoError(){S.error()}};function _e(e,r){return(...t)=>{c(fe,`native function \`${e}\` called before runtime initialization`);var n=H[e];return c(n,`exported native function \`${e}\` not found`),c(t.length<=r,`native function \`${e}\` called with ${t.length} args but expects ${r}`),n(...t)}}var Q;function dr(){return i.locateFile?ge("xa_encoder.wasm"):new URL("/tools/track-editor/assets/xa_encoder-pDsCXzla.wasm",self.location.href).href}function ur(e){if(e==Q&&J)return new Uint8Array(J);if(Y)return Y(e);throw"both async and sync fetching of the wasm failed"}async function fr(e){if(!J)try{var r=await k(e);return new Uint8Array(r)}catch{}return ur(e)}async function _r(e,r){try{var t=await fr(e),n=await WebAssembly.instantiate(t,r);return n}catch(a){p(`failed to asynchronously prepare wasm: ${a}`),q(Q)&&p(`warning: Loading from a file URI (${Q}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),g(a)}}async function pr(e,r,t){if(!e&&typeof WebAssembly.instantiateStreaming=="function"&&!q(r)&&!A)try{var n=fetch(r,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(n,t);return a}catch(l){p(`wasm streaming compile failed: ${l}`),p("falling back to ArrayBuffer instantiation")}return _r(r,t)}function mr(){return{env:qe,wasi_snapshot_preview1:qe}}async function gr(){function e(o,s){return H=o.exports,K=H.memory,c(K,"memory not found in wasm exports"),Re(),ft(H),cr("wasm-instantiate"),H}lr("wasm-instantiate");var r=i;function t(o){return c(i===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,e(o.instance)}var n=mr();if(i.instantiateWasm)return new Promise((o,s)=>{try{i.instantiateWasm(n,(d,u)=>{o(e(d,u))})}catch(d){p(`Module.instantiateWasm callback failed with error: ${d}`),s(d)}});Q??(Q=dr());var a=await pr(J,Q,n),l=t(a);return l}var Me=e=>{for(;e.length>0;)e.shift()(i)},Ue=[],vr=e=>Ue.push(e),Le=[],yr=e=>Le.push(e);function Fr(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":return C[e];case"i8":return C[e];case"i16":return B[e>>1];case"i32":return L[e>>2];case"i64":return ue[e>>3];case"float":return ce[e>>2];case"double":return de[e>>3];case"*":return f[e>>2];default:g(`invalid type for getValue: ${r}`)}}var ee=e=>(c(typeof e=="number"),e>>>=0,"0x"+e.toString(16).padStart(8,"0"));function Sr(e,r,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":C[e]=r;break;case"i8":C[e]=r;break;case"i16":B[e>>1]=r;break;case"i32":L[e>>2]=r;break;case"i64":ue[e>>3]=BigInt(r);break;case"float":ce[e>>2]=r;break;case"double":de[e>>3]=r;break;case"*":f[e>>2]=r;break;default:g(`invalid type for setValue: ${t}`)}}var hr=e=>je(e),br=()=>Je(),T=e=>{T.shown||(T.shown={}),T.shown[e]||(T.shown[e]=1,A&&(e="warning: "+e),p(e))},De=typeof TextDecoder<"u"?new TextDecoder:void 0,xe=(e,r=0,t=NaN)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;if(a-r>16&&e.buffer&&De)return De.decode(e.subarray(r,a));for(var l="";r<a;){var o=e[r++];if(!(o&128)){l+=String.fromCharCode(o);continue}var s=e[r++]&63;if((o&224)==192){l+=String.fromCharCode((o&31)<<6|s);continue}var d=e[r++]&63;if((o&240)==224?o=(o&15)<<12|s<<6|d:((o&248)!=240&&T("Invalid UTF-8 leading byte "+ee(o)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(o&7)<<18|s<<12|d<<6|e[r++]&63),o<65536)l+=String.fromCharCode(o);else{var u=o-65536;l+=String.fromCharCode(55296|u>>10,56320|u&1023)}}return l},re=(e,r)=>(c(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?xe(F,e,r):""),Tr=(e,r,t,n)=>g(`Assertion failed: ${re(e)}, at: `+[r?re(r):"unknown filename",t,n?re(n):"unknown function"]),wr=()=>g("native code called abort()"),I=e=>{for(var r="";;){var t=F[e++];if(!t)return r;r+=String.fromCharCode(t)}},ye={},Ne={},Er=class extends Error{constructor(r){super(r),this.name="BindingError"}},te=e=>{throw new Er(e)};function Ar(e,r,t={}){var n=r.name;if(e||te(`type "${n}" must have a positive integer typeid pointer`),Ne.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;te(`Cannot register type '${n}' twice`)}if(Ne[e]=r,ye.hasOwnProperty(e)){var a=ye[e];delete ye[e],a.forEach(l=>l())}}function w(e,r,t={}){if(r.argPackAdvance===void 0)throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ar(e,r,t)}var Oe=(e,r,t)=>{switch(r){case 1:return t?n=>C[n]:n=>F[n];case 2:return t?n=>B[n>>1]:n=>$[n>>1];case 4:return t?n=>L[n>>2]:n=>f[n>>2];case 8:return t?n=>ue[n>>3]:n=>Ie[n>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},pe=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},We=(e,r,t,n)=>{if(r<t||r>n)throw new TypeError(`Passing a number "${pe(r)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${t}, ${n}]!`)},kr=(e,r,t,n,a)=>{r=I(r);const l=n===0n;let o=s=>s;if(l){const s=t*8;o=d=>BigInt.asUintN(s,d),a=o(a)}w(e,{name:r,fromWireType:o,toWireType:(s,d)=>{if(typeof d=="number")d=BigInt(d);else if(typeof d!="bigint")throw new TypeError(`Cannot convert "${pe(d)}" to ${this.name}`);return We(r,d,n,a),d},argPackAdvance:R,readValueFromPointer:Oe(r,t,!l),destructorFunction:null})},R=8,Pr=(e,r,t,n)=>{r=I(r),w(e,{name:r,fromWireType:function(a){return!!a},toWireType:function(a,l){return l?t:n},argPackAdvance:R,readValueFromPointer:function(a){return this.fromWireType(F[a])},destructorFunction:null})},Be=[],E=[0,1,,1,null,1,!0,1,!1,1],Cr=e=>{e>9&&--E[e+1]===0&&(c(E[e]!==void 0,"Decref for unallocated handle."),E[e]=void 0,Be.push(e))},$e={toValue:e=>(e||te(`Cannot use deleted val. handle = ${e}`),c(e===2||E[e]!==void 0&&e%2===0,`invalid handle: ${e}`),E[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=Be.pop()||E.length;return E[r]=e,E[r+1]=1,r}}}};function Fe(e){return this.fromWireType(f[e>>2])}var Ir={name:"emscripten::val",fromWireType:e=>{var r=$e.toValue(e);return Cr(e),r},toWireType:(e,r)=>$e.toHandle(r),argPackAdvance:R,readValueFromPointer:Fe,destructorFunction:null},Rr=e=>w(e,Ir),Mr=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(ce[t>>2])};case 8:return function(t){return this.fromWireType(de[t>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},Ur=(e,r,t)=>{r=I(r),w(e,{name:r,fromWireType:n=>n,toWireType:(n,a)=>{if(typeof a!="number"&&typeof a!="boolean")throw new TypeError(`Cannot convert ${pe(a)} to ${this.name}`);return a},argPackAdvance:R,readValueFromPointer:Mr(r,t),destructorFunction:null})},Lr=(e,r,t,n,a)=>{r=I(r);const l=n===0;let o=d=>d;if(l){var s=32-8*t;o=d=>d<<s>>>s,a=o(a)}w(e,{name:r,fromWireType:o,toWireType:(d,u)=>{if(typeof u!="number"&&typeof u!="boolean")throw new TypeError(`Cannot convert "${pe(u)}" to ${r}`);return We(r,u,n,a),u},argPackAdvance:R,readValueFromPointer:Oe(r,t,n!==0),destructorFunction:null})},Dr=(e,r,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],a=n[r];function l(o){var s=f[o>>2],d=f[o+4>>2];return new a(C.buffer,d,s)}t=I(t),w(e,{name:t,fromWireType:l,argPackAdvance:R,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},xr=(e,r,t,n)=>{if(c(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;for(var a=t,l=t+n-1,o=0;o<e.length;++o){var s=e.codePointAt(o);if(s<=127){if(t>=l)break;r[t++]=s}else if(s<=2047){if(t+1>=l)break;r[t++]=192|s>>6,r[t++]=128|s&63}else if(s<=65535){if(t+2>=l)break;r[t++]=224|s>>12,r[t++]=128|s>>6&63,r[t++]=128|s&63}else{if(t+3>=l)break;s>1114111&&T("Invalid Unicode code point "+ee(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),r[t++]=240|s>>18,r[t++]=128|s>>12&63,r[t++]=128|s>>6&63,r[t++]=128|s&63,o++}}return r[t]=0,t-a},He=(e,r,t)=>(c(typeof t=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),xr(e,F,r,t)),Ve=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},Nr=(e,r)=>{r=I(r),w(e,{name:r,fromWireType(t){for(var n=f[t>>2],a=t+4,l,o,s=a,o=0;o<=n;++o){var d=a+o;if(o==n||F[d]==0){var u=d-s,_=re(s,u);l===void 0?l=_:(l+="\0",l+=_),s=d+1}}return N(t),l},toWireType(t,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,l=typeof n=="string";l||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||te("Cannot pass non-string to std::string"),l?a=Ve(n):a=n.length;var o=me(4+a+1),s=o+4;return f[o>>2]=a,l?He(n,s,a+1):F.set(n,s),t!==null&&t.push(N,o),o},argPackAdvance:R,readValueFromPointer:Fe,destructorFunction(t){N(t)}})},Ge=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Or=(e,r)=>{c(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var t=e>>1,n=t+r/2,a=t;!(a>=n)&&$[a];)++a;if(a-t>16&&Ge)return Ge.decode($.subarray(t,a));for(var l="",o=t;!(o>=n);++o){var s=$[o];if(s==0)break;l+=String.fromCharCode(s)}return l},Wr=(e,r,t)=>{if(c(r%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),c(typeof t=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),t??(t=2147483647),t<2)return 0;t-=2;for(var n=r,a=t<e.length*2?t/2:e.length,l=0;l<a;++l){var o=e.charCodeAt(l);B[r>>1]=o,r+=2}return B[r>>1]=0,r-n},Br=e=>e.length*2,$r=(e,r)=>{c(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var t="",n=0;!(n>=r/4);n++){var a=L[e+n*4>>2];if(!a)break;t+=String.fromCodePoint(a)}return t},Hr=(e,r,t)=>{if(c(r%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),c(typeof t=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),t??(t=2147483647),t<4)return 0;for(var n=r,a=n+t-4,l=0;l<e.length;++l){var o=e.codePointAt(l);if(o>65535&&l++,L[r>>2]=o,r+=4,r+4>a)break}return L[r>>2]=0,r-n},Vr=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.codePointAt(t);n>65535&&t++,r+=4}return r},Gr=(e,r,t)=>{t=I(t);var n,a,l,o;r===2?(n=Or,a=Wr,o=Br,l=s=>$[s>>1]):r===4&&(n=$r,a=Hr,o=Vr,l=s=>f[s>>2]),w(e,{name:t,fromWireType:s=>{for(var d=f[s>>2],u,_=s+4,O=0;O<=d;++O){var W=s+4+O*r;if(O==d||l(W)==0){var Te=W-_,m=n(_,Te);u===void 0?u=m:(u+="\0",u+=m),_=W+r}}return N(s),u},toWireType:(s,d)=>{typeof d!="string"&&te(`Cannot pass non-string to C++ string type ${t}`);var u=o(d),_=me(4+u+r);return f[_>>2]=u/r,a(d,_+4,u+r),s!==null&&s.push(N,_),_},argPackAdvance:R,readValueFromPointer:Fe,destructorFunction(s){N(s)}})},zr=(e,r)=>{r=I(r),w(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,n)=>{}})},jr=()=>2147483648,Yr=(e,r)=>(c(r,"alignment argument is required"),Math.ceil(e/r)*r),Jr=e=>{var r=K.buffer,t=(e-r.byteLength+65535)/65536|0;try{return K.grow(t),Re(),1}catch(n){p(`growMemory: Attempted to grow heap from ${r.byteLength} bytes to ${e} bytes, but got error: ${n}`)}},qr=e=>{var r=F.length;e>>>=0,c(e>r);var t=jr();if(e>t)return p(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${t} bytes!`),!1;for(var n=1;n<=4;n*=2){var a=r*(1+.2/n);a=Math.min(a,e+100663296);var l=Math.min(t,Yr(Math.max(e,a),65536)),o=Jr(l);if(o)return!0}return p(`Failed to grow the heap from ${r} bytes to ${l} bytes, not enough memory!`),!1},Kr=e=>{g("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")};function Xr(e,r,t,n){return 70}var Zr=[null,[],[]],Qr=(e,r)=>{var t=Zr[e];c(t),r===0||r===10?((e===1?Ee:p)(xe(t)),t.length=0):t.push(r)},et=(e,r,t,n)=>{for(var a=0,l=0;l<t;l++){var o=f[r>>2],s=f[r+4>>2];r+=8;for(var d=0;d<s;d++)Qr(e,F[o+d]);a+=s}return f[n>>2]=a,0},rt=e=>{var r=i["_"+e];return c(r,"Cannot call unknown function "+e+", make sure it is exported"),r},tt=(e,r)=>{c(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),C.set(e,r)},Se=e=>Ye(e),nt=e=>{var r=Ve(e)+1,t=Se(r);return He(e,t,r),t},it=(e,r,t,n,a)=>{var l={string:m=>{var ne=0;return m!=null&&m!==0&&(ne=nt(m)),ne},array:m=>{var ne=Se(m.length);return tt(m,ne),ne}};function o(m){return r==="string"?re(m):r==="boolean"?!!m:m}var s=rt(e),d=[],u=0;if(c(r!=="array",'Return type should not be "array".'),n)for(var _=0;_<n.length;_++){var O=l[t[_]];O?(u===0&&(u=br()),d[_]=O(n[_])):d[_]=n[_]}var W=s(...d);function Te(m){return u!==0&&hr(u),o(m)}return W=Te(W),W},at=(e,r,t,n)=>(...a)=>it(e,r,t,a),ot=1,st=(e,r)=>{var t;return c(typeof r=="number","allocate no longer takes a type argument"),c(typeof e!="number","allocate no longer takes a number as arg0"),r==ot?t=Se(e.length):t=me(e.length),!e.subarray&&!e.slice&&(e=new Uint8Array(e)),F.set(e,t),t},lt=0;c(E.length===10),i.noExitRuntime&&i.noExitRuntime,i.print&&(Ee=i.print),i.printErr&&(p=i.printErr),i.wasmBinary&&(J=i.wasmBinary),i.FS_createDataFile=S.createDataFile,i.FS_createPreloadedFile=S.createPreloadedFile,ut(),i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,c(typeof i.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),c(typeof i.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),c(typeof i.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),c(typeof i.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),c(typeof i.read>"u","Module.read option was removed"),c(typeof i.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),c(typeof i.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),c(typeof i.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),c(typeof i.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),c(typeof i.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),c(typeof i.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),c(typeof i.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),c(typeof i.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),i.cwrap=at,i.setValue=Sr,i.getValue=Fr,i.ALLOC_NORMAL=lt,i.allocate=st;var ct=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","setTempRet0","zeroMemory","exitJS","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","getExecutableName","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","mmapAlloc","HandleAllocator","getNativeTypeSize","getUniqueRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","stringToAscii","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","writeStringToMemory","writeAsciiToMemory","demangle","stackTrace","throwInternalError","whenDependentTypesAreResolved","getTypeName","getFunctionName","getFunctionArgsName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","createJsInvokerSignature","checkArgCount","getRequiredArgCount","createJsInvoker","UnboundTypeError","PureVirtualError","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","createNamedFunction","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","enumReadValueFromPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","flushPendingDeletes","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","count_emval_handles","getStringOrSymbol","emval_get_global","emval_returnValue","emval_lookupTypes","emval_addMethodCaller"];ct.forEach(ir);var dt=["run","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU16","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","alignMemory","wasmTable","noExitRuntime","addOnPreRun","addOnPostRun","ccall","freeTableIndexes","functionsInTableMap","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","AsciiToString","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","ALLOC_STACK","allocateUTF8","allocateUTF8OnStack","print","printErr","jstoi_s","InternalError","BindingError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","GenericWireTypeSize","EmValType","EmValOptionalType","embindRepr","registeredInstances","registeredPointers","registerType","integerReadValueFromPointer","floatReadValueFromPointer","assertIntegerRange","readPointer","finalizationRegistry","detachFinalizer_deps","deletionQueue","delayFunction","emval_freelist","emval_handles","emval_symbols","Emval","emval_methodCallers"];dt.forEach(Ce);function ut(){nr("fetchSettings")}i._psx_audio_xa_get_buffer_size=b("_psx_audio_xa_get_buffer_size"),i._psx_audio_xa_encode_simple=b("_psx_audio_xa_encode_simple");var me=i._malloc=b("_malloc"),N=i._free=b("_free"),ze=b("_emscripten_stack_init"),he=b("_emscripten_stack_get_end"),je=b("__emscripten_stack_restore"),Ye=b("__emscripten_stack_alloc"),Je=b("_emscripten_stack_get_current");function ft(e){i._psx_audio_xa_get_buffer_size=_e("psx_audio_xa_get_buffer_size",2),i._psx_audio_xa_encode_simple=_e("psx_audio_xa_encode_simple",4),i._malloc=me=_e("malloc",1),i._free=N=_e("free",1),ze=e.emscripten_stack_init,e.emscripten_stack_get_free,e.emscripten_stack_get_base,he=e.emscripten_stack_get_end,je=e._emscripten_stack_restore,Ye=e._emscripten_stack_alloc,Je=e.emscripten_stack_get_current}var qe={__assert_fail:Tr,_abort_js:wr,_embind_register_bigint:kr,_embind_register_bool:Pr,_embind_register_emval:Rr,_embind_register_float:Ur,_embind_register_integer:Lr,_embind_register_memory_view:Dr,_embind_register_std_string:Nr,_embind_register_std_wstring:Gr,_embind_register_void:zr,emscripten_resize_heap:qr,fd_close:Kr,fd_seek:Xr,fd_write:et},H=await gr(),Ke;function _t(){ze(),tr()}function be(){if(D>0){X=be;return}if(_t(),ar(),D>0){X=be;return}function e(){var r;c(!Ke),Ke=!0,i.calledRun=!0,!ae&&(or(),se==null||se(i),(r=i.onRuntimeInitialized)==null||r.call(i),oe("onRuntimeInitialized"),c(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),sr())}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e(),ve()}function pt(){if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.shift()();oe("preInit")}pt(),be(),fe?M=i:M=new Promise((e,r)=>{se=e,le=r});for(const e of Object.keys(i))e in V||Object.defineProperty(V,e,{configurable:!0,get(){g(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return M};let v;onmessage=async V=>{const{pcm:M,frequency:i,channels:G,bitDepth:z}=V.data;v||(v=await er());const A=M.length/G,h=v.HEAP32,y=v._malloc(24);h[y>>2]=0,h[(y>>2)+1]=+(G===2),h[(y>>2)+2]=i,h[(y>>2)+3]=z,h[(y>>2)+4]=1,h[(y>>2)+5]=1;const U=v._malloc(M.length*2);v.HEAP16.set(M,U>>1);const ge=v.cwrap("psx_audio_xa_get_buffer_size","number",["number","number"])(y,A),k=v._malloc(ge),ie=v.cwrap("psx_audio_xa_encode_simple","number",["number","number","number","number"])(y,U,A,k),P=v.HEAPU8.slice(k,k+ie);v._free(y),v._free(U),v._free(k),console.log(`[INFO] [XA] ${new Date().toISOString()} - Encode finished.`),postMessage(P,[P.buffer])};var rr=Object.freeze({__proto__:null})})();
